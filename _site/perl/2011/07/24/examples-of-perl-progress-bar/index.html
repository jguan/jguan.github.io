<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="Jeremy's notes & thoughts on web development">
	<meta name="author" content="Jeremy Guan">
	<meta name="viewport" content="width=device-width, maximum-scale=1.0">
	<title>Jeremy Guan: Examples of Perl progress bar</title>
	<link rel="alternate" type="application/rss+xml" title="Recent Posts(RSS 2.0)" href="/rss.xml" />
	<link rel="alternate" type="application/atom+xml" title="Recent Posts(Atom)" href="/atom.xml" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/syntax.css">
	<script src="/js/libs/modernizr-2.0.min.js"></script>
	<script src="/js/libs/respond.min.js"></script>
</head>
<body>
	<div id="wrapper">
		<header id="site-header"> 
		<hgroup>
			<h1 id="site-logo"><a href="/">Jeremy Guan</a></h1> 
			<h2 id="site-description">notes & thoughts <br / >on web development</h2> 
		</hgroup>
		<nav id="site-nav">
			<ul>
				<li><a href="/">BLOG</a></li>
				<li><a href="/about">ABOUT</a></li>
				<li><a href="/albums">ALBUMS</a></li>
				<li><a href="/resume">RESUME</a></li>
				<li><a href="/portfolio">PORTFOLIO</a></li>
			</ul>
		</nav>
		<form id="searchform" method="get" action="http://www.google.com/search">
			<input type="hidden" name="ie" value="UTF-8">
			<input type="hidden" name="oe" value="UTF-8">
			<input type="hidden" name="domains" value="http://jeremyguan.com">
			<input type="hidden" name="sitesearch" value="http://jeremyguan.com">
			<input name="q" id="q" type="text" placeholder="Search" value="Search">
		</form>
		<div id="social-links">
			<a href="/rss.xml">RSS</a> | 
			<a href="/atom.xml">Atom</a><br />
			<a target="_blank" href="http://twitter.com/#!/sg316">Twitter</a> &middot; 
			<a target="_blank" href="http://www.facebook.com/songyuan.guan">Facebook</a><br /> 
			<a target="_blank" href="http://www.linkedin.com/in/jeremyguan">Linkedin</a> &middot;   
			<a target="_blank" href="http://www.delicious.com/sg316">Delicious</a><br />
			<a target="_blank" href="https://github.com/jguan">GitHub</a> &middot;  
			<a target="_blank" href="http://www.douban.com/people/jeremyguan/">Douban</a> &middot; 
			<a target="_blank" href="http://live.xbox.com/en-AU/member/sg316">Xbox Live</a> 
		</div>
		</header><!-- /#site-header -->
		<div id="content">
			<article>
	<header>
		<span class="date"><time pubdate="" datetime="">July 24, 2011</time></span>
		<h2><a href="/perl/2011/07/24/examples-of-perl-progress-bar/" rel="bookmark" title="Permanent Link to Examples of Perl progress bar">Examples of Perl progress bar</a></h2>
	</header>
    

<div class="highlight"><pre><code class="perl"><span class="c1">#!/usr/bin/perl</span>
<span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
<span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
<span class="vg">$|</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">my</span> <span class="nv">$max</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="c1"># 1. dots</span>
<span class="k">for</span> <span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="nv">$max</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="s">&quot;.&quot;</span><span class="p">;</span>
    <span class="k">print</span> <span class="s">&quot; Complete!\n&quot;</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$_</span> <span class="o">==</span> <span class="nv">$max</span><span class="p">);</span>
    <span class="nb">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1"># output: &quot; .......... Complete!&quot;</span>
<span class="c1">#</span>
<span class="c1"># 2. simple percentage</span>
<span class="k">for</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="nv">$max</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">my</span> <span class="nv">$percent</span> <span class="o">=</span> <span class="nv">$_</span><span class="o">/</span><span class="nv">$max</span><span class="o">*</span><span class="mi">100</span><span class="p">;</span>
    <span class="k">print</span> <span class="s">&quot;\r $percent %&quot;</span><span class="p">;</span>
    <span class="nb">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>  
<span class="c1"># output: &quot; 100 %&quot;</span>
<span class="c1">#</span>
<span class="nv">$max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="c1">#</span>
<span class="c1"># 3. spinning bar</span>
<span class="k">my</span> <span class="nv">@progress_symbol</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span><span class="s">&#39;\\&#39;</span><span class="p">,</span><span class="s">&#39;|&#39;</span><span class="p">,</span><span class="s">&#39;/&#39;</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">$n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nv">$i</span><span class="o">&lt;=</span><span class="nv">$max</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">print</span> <span class="s">&quot;\r $progress_symbol[$n] $i %&quot;</span><span class="p">;</span>
    <span class="nv">$n</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$n</span><span class="o">&gt;=</span><span class="mi">3</span><span class="p">)</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="nv">$n</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="nb">select</span><span class="p">(</span><span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
<span class="c1"># output: &quot; / 100 %&quot;</span>
<span class="c1">#</span>
<span class="c1"># 4. dynamic progress indicator </span>
<span class="k">for</span> <span class="p">(</span><span class="k">my</span> <span class="nv">$i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nv">$i</span><span class="o">&lt;=</span><span class="nv">$max</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">proc_bar</span><span class="p">(</span><span class="nv">$i</span><span class="p">,</span><span class="nv">$max</span><span class="p">);</span>
    <span class="nb">select</span><span class="p">(</span><span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="nb">undef</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
<span class="k">sub </span><span class="nf">proc_bar</span><span class="p">{</span>
    <span class="nb">local</span> <span class="vg">$|</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$i</span> <span class="o">=</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$n</span> <span class="o">=</span> <span class="nv">$_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">print</span> <span class="s">&quot;\r\033[36m[\033[33m&quot;</span><span class="o">.</span><span class="p">(</span><span class="s">&quot;|&quot;</span> <span class="n">x</span> <span class="nb">int</span><span class="p">((</span><span class="nv">$i</span><span class="o">/</span><span class="nv">$n</span><span class="p">)</span><span class="o">*</span><span class="mi">50</span><span class="p">))</span><span class="o">.</span>
        <span class="p">(</span><span class="s">&quot; &quot;</span> <span class="n">x</span> <span class="p">(</span><span class="mi">50</span> <span class="o">-</span> <span class="nb">int</span><span class="p">((</span><span class="nv">$i</span><span class="o">/</span><span class="nv">$n</span><span class="p">)</span><span class="o">*</span><span class="mi">50</span><span class="p">)))</span><span class="o">.</span><span class="s">&quot;\033[36m]&quot;</span><span class="p">;</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s">&quot;%2.1f%%\033[0m&quot;</span><span class="p">,</span><span class="nv">$i</span><span class="o">/</span><span class="nv">$n</span><span class="o">*</span><span class="mi">100</span><span class="p">);</span>
    <span class="nb">local</span> <span class="vg">$|</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1"># output: &quot;[||||||||||||||||||||||||||||||||||||||||||||||||||]100.0%&quot;</span>
</code></pre></div>




	<footer>
		Posted by Jeremy Guan at 11:36 PM 
		
		| category:
			
			<a href="http://jeremyguan.com/categories/#perl" title="perl">perl</a>&nbsp;
			
		
		
		| tags:
			
			<a href="http://jeremyguan.com/tags/#perl" title="perl">perl</a>&nbsp;
			
		
		
		| <a href="/perl/2011/07/24/examples-of-perl-progress-bar/#disqus_thread">View Comments</a>
		
		| <a href="/perl/2011/07/24/examples-of-perl-progress-bar/">Permalink &#8734;</a>
	</footer>
</article>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jeremyguan'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
		</div><!-- /#content -->
	</div><!-- /#wrapper -->
	<footer id="site-footer">
		<span id="copyright">
			Copyright &copy; 2011 - 2013 Jeremy Guan. RSS feeds for <a href="/rss.xml">Entries</a>
			
				and <a href="http://jeremyguan.disqus.com/latest.rss">Comments</a>.
			
		</span>
		<span id="validation">
		</span>
	</footer><!-- /#site-footer -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/libs/jquery-1.10.2.min.js"><\/script>')</script>
	<script src="/js/plugins.js"></script>
	<script src="/js/script.js"></script>
	<script src="/js/jquery.tagcloud.js"></script>
	<script language="javascript">
		$.fn.tagcloud.defaults = {
			size: {start: 1, end: 1, unit: 'em'},
			color: {start: '#f8e0e6', end: '#ff3333'}
		};

		$(function () {
			$('#tag_cloud a').tagcloud();
		});
	</script>
	<script>
		var _gaq=[['_setAccount','UA-5719292-3'],['_trackPageview'],['_trackPageLoadTime']];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
		g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>
	<!--[if lt IE 7 ]>
		<script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script>
		<script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script>
	<![endif]-->
	
	<!-- DISPLAY DISQUS COMMENT COUNT -->
	 <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jeremyguan'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
	
  </body>
</html>