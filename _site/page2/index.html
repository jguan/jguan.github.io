<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="Jeremy's notes & thoughts on web development">
	<meta name="author" content="Jeremy Guan">
	<meta name="viewport" content="width=device-width, maximum-scale=1.0">
	<title>Jeremy Guan</title>
	<link rel="alternate" type="application/rss+xml" title="Recent Posts(RSS 2.0)" href="/rss.xml" />
	<link rel="alternate" type="application/atom+xml" title="Recent Posts(Atom)" href="/atom.xml" />
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/syntax.css">
	<script src="/js/libs/modernizr-2.0.min.js"></script>
	<script src="/js/libs/respond.min.js"></script>
</head>
<body>
	<div id="wrapper">
		<header id="site-header"> 
		<hgroup>
			<h1 id="site-logo"><a href="/">Jeremy Guan</a></h1> 
			<h2 id="site-description">notes & thoughts <br / >on web development</h2> 
		</hgroup>
		<nav id="site-nav">
			<ul>
				<li><a href="/">BLOG</a></li>
				<li><a href="/about">ABOUT</a></li>
				<li><a href="/albums">ALBUMS</a></li>
				<li><a href="/resume">RESUME</a></li>
				<li><a href="/portfolio">PORTFOLIO</a></li>
			</ul>
		</nav>
		<form id="searchform" method="get" action="http://www.google.com/search">
			<input type="hidden" name="ie" value="UTF-8">
			<input type="hidden" name="oe" value="UTF-8">
			<input type="hidden" name="domains" value="http://jeremyguan.com">
			<input type="hidden" name="sitesearch" value="http://jeremyguan.com">
			<input name="q" id="q" type="text" placeholder="Search" value="Search">
		</form>
		<div id="social-links">
			<a href="/rss.xml">RSS</a> | 
			<a href="/atom.xml">Atom</a><br />
			<a target="_blank" href="http://twitter.com/#!/sg316">Twitter</a> &middot; 
			<a target="_blank" href="http://www.facebook.com/songyuan.guan">Facebook</a><br /> 
			<a target="_blank" href="http://www.linkedin.com/in/jeremyguan">Linkedin</a> &middot;   
			<a target="_blank" href="http://www.delicious.com/sg316">Delicious</a><br />
			<a target="_blank" href="https://github.com/jguan">GitHub</a> &middot;  
			<a target="_blank" href="http://www.douban.com/people/jeremyguan/">Douban</a> &middot; 
			<a target="_blank" href="http://live.xbox.com/en-AU/member/sg316">Xbox Live</a> 
		</div>
		</header><!-- /#site-header -->
		<div id="content">
			
<article>
	<header>
		<span class="date"><time pubdate="" datetime="">July 07, 2011</time></span>
		<h2><a href="/vim/2011/07/07/convert-csv-to-sql-insert-query/" rel="bookmark" title="Permanent Link to Convert CSV to SQL insert query">Convert CSV to SQL insert query</a></h2>
	</header>
    <p>Recently I need to import data from CSV files into databases frequently. This post just records the process of conversion I'm using in Vim.</p>

<p>Assuming the CSV file is:</p>

<div class="highlight"><pre><code class="text">1, A , a
1, B , b
1, C , c
</code></pre></div>


<p>On each line, clean up all the spaces preceding and following the commas ",".<br/>
<code>:%s/\s*,\s*/,/g</code></p>

<p>Replace the beginning of each line by "(".<br/>
<code>:%s/^/(</code></p>

<p>Replace the end of each line by ")".<br/>
<code>:%s/$/),</code></p>

<p>Add double quotes (") to text fields.<br/>
<code>:%s/\(.*\),\(.*\),\(.*\)/\1,"\2","\3"</code></p>

<p>Or we can combine last three steps into one command.<br/>
<code>:%s/\(.*\),\(.*\),\(.*\)/(\1,"\2","\3"),</code></p>

<p>At last, complete the <code>INSERT</code> statement and don't forget to replace the last comma with semicolon ";".</p>

<div class="highlight"><pre><code class="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table_name</span> <span class="k">VALUES</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="ss">&quot;A&quot;</span><span class="p">,</span><span class="ss">&quot;a&quot;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="ss">&quot;B&quot;</span><span class="p">,</span><span class="ss">&quot;b&quot;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="ss">&quot;C&quot;</span><span class="p">,</span><span class="ss">&quot;c&quot;</span><span class="p">);</span>
</code></pre></div>




	<footer>
		Posted by Jeremy Guan at 12:04 AM 
		
		| category:
			
			<a href="/categories/#vim" title="vim">vim</a>&nbsp;
			
		
		
		| tags:
			
			<a href="/tags/#vim" title="vim">vim</a>&nbsp;
			
		
		
		| <a href="/vim/2011/07/07/convert-csv-to-sql-insert-query/#disqus_thread">View Comments</a>
		
		| <a href="/vim/2011/07/07/convert-csv-to-sql-insert-query/">Permalink &#8734;</a>
	</footer>
</article>

<article>
	<header>
		<span class="date"><time pubdate="" datetime="">July 05, 2011</time></span>
		<h2><a href="/sql/2011/07/05/excluding-null-values-when-using-NOT-IN/" rel="bookmark" title="Permanent Link to Excluding NULL values when using NOT IN operator">Excluding NULL values when using NOT IN operator</a></h2>
	</header>
    <p>Let's see an example retrieving the elements exist in Table <em>A</em> but not in Table <em>B</em> first.</p>

<div class="highlight"><pre><code class="sql"><span class="c1">-- Input</span>
<span class="c1">-----------------------------------</span>
<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="n">A</span>
<span class="c1">-----------------------------------</span>
<span class="c1">-- Output</span>
<span class="c1">----------</span>
<span class="n">name</span>
<span class="c1">----------</span>
<span class="n">Bing</span>
<span class="n">Google</span>
<span class="n">Yahoo</span>
<span class="c1">----------</span>
<span class="c1">-- Input</span>
<span class="c1">-----------------------------------</span>
<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="n">B</span>
<span class="c1">-----------------------------------</span>
<span class="c1">-- Output</span>
<span class="c1">----------</span>
<span class="n">name</span>   
<span class="c1">----------</span>
<span class="n">Bing</span> 
<span class="n">Yahoo</span>
<span class="k">NULL</span>
<span class="c1">----------</span>
<span class="c1">-- Input</span>
<span class="c1">-----------------------------------</span>
<span class="k">select</span> <span class="n">name</span> 
<span class="k">from</span> <span class="n">A</span> 
<span class="k">where</span> <span class="n">name</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
    <span class="k">select</span> <span class="n">name</span> 
    <span class="k">from</span> <span class="n">B</span> 
    <span class="k">where</span> <span class="n">name</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span>
<span class="p">)</span>
<span class="c1">-----------------------------------</span>
<span class="c1">-- Output</span>
<span class="c1">----------</span>
<span class="n">name</span>
<span class="c1">----------</span>
<span class="n">Google</span>
<span class="c1">----------</span>
<span class="c1">-----------------------------------</span>
</code></pre></div>


<p>In the last query, if you remove <em>"where name is not null"</em> clause, you won't get expected result.
The reason is when comparing "Google" in Table <em>A</em> with Table <em>B</em>, the logic is equivalent to:<br/>
<em>"Google" &lt;> "Bing" (TRUE) and "Google" &lt;> "Yahoo" (TRUE) and "Google" &lt;> null (UNKNOWN)</em><br/>
This leads to <em>UNKNOWN</em> finally in <code>WHERE</code> clause so nothing will return. In a word, just remember to
exclude <strong>NULL</strong> values when using <code>NOT IN</code> in <code>WHERE</code> clause.</p>

	<footer>
		Posted by Jeremy Guan at 10:20 PM 
		
		| category:
			
			<a href="/categories/#sql" title="sql">sql</a>&nbsp;
			
		
		
		| tags:
			
			<a href="/tags/#sql" title="sql">sql</a>&nbsp;
			
		
		
		| <a href="/sql/2011/07/05/excluding-null-values-when-using-NOT-IN/#disqus_thread">View Comments</a>
		
		| <a href="/sql/2011/07/05/excluding-null-values-when-using-NOT-IN/">Permalink &#8734;</a>
	</footer>
</article>

<article>
	<header>
		<span class="date"><time pubdate="" datetime="">July 04, 2011</time></span>
		<h2><a href="/google/2011/07/04/google-search-basics/" rel="bookmark" title="Permanent Link to Google Search Basics">Google Search Basics</a></h2>
	</header>
    <p><strong>"Keep it simple"</strong> is the general principle for Google search. That is to say, thinking of the words are most likely to appear on the page
you are looking for, then choose the best descriptive words and keep them as few as possible. Also, the following basic rules you should keep in mind as well.</p>

<p><em>* square brackets [ ] to signal a search query in the examples below</em></p>

<ol>
<li><p>Generally all the words you put in the query will be used except the words are commonly used, like 'the,' 'a,' and 'for,'.</p></li>
<li><p>Search is always <strong>case insensitive</strong>.</p></li>
<li><p>Generally punctuation and other special characters are ignored but some <strong>exceptions</strong> may apply.</p></li>
</ol>


<ul>
<li>Punctuation in popular terms that have particular meanings is <em>not ignored</em>.<br />
Example: [ C++ ] [ C# ]</li>
<li>The dollar sign ($) used to indicate prices is <em>not ignored</em>.<br />
Example: [ nikon $400 ]</li>
<li>The hyphen - and underscore symbol _ used to connect two words are <em>not ignored</em>.<br />
Example: [ quick-sort ] [ quick_sort ]</li>
</ul>


<ol>
<li><p>By putting double quotes <strong>("")</strong> around a set of words, the exact words in that exact order are used in the search.</p></li>
<li><p>Search could be within a specific website <strong>(site:)</strong>.<br/>
Example: [ iraq site:nytimes.com ] [ iraq site:.gov ]</p></li>
<li><p>Attaching a minus sign <strong>(-)</strong> immediately before a word indicates that you want to exclude this word from the results.
Example: [ anti-virus -software ] [ iraq -site:nytimes.com ]</p></li>
<li><p>The wildcard <strong>(*)</strong> is treated as any unknown term(s) in a search.<br/>
Example: [ Obama voted * on the * bill ]</p></li>
<li><p>Google employs synonyms automatically. To avoid this feature, attaching a <strong>+</strong> immediately before a word.
It is the same with putting double quotes <strong>("")</strong> around a single word.</p></li>
<li><p>By default, the <strong>AND</strong> operator is used among the words. If you want to specify either one of several words, you can use the <strong>OR</strong> operator.
(note that you have to type 'OR' in ALL CAPS).<br/>
Example: [ San Francisco Giants 2004 OR 2005 ]</p></li>
</ol>


<h3>References</h3>

<ul>
<li><a href="http://www.google.com/support/websearch/">Google Web Search Help</a></li>
</ul>


	<footer>
		Posted by Jeremy Guan at 10:43 PM 
		
		| category:
			
			<a href="/categories/#google" title="google">google</a>&nbsp;
			
		
		
		| tags:
			
			<a href="/tags/#google" title="google">google</a>&nbsp;
			
		
		
		| <a href="/google/2011/07/04/google-search-basics/#disqus_thread">View Comments</a>
		
		| <a href="/google/2011/07/04/google-search-basics/">Permalink &#8734;</a>
	</footer>
</article>

<article>
	<header>
		<span class="date"><time pubdate="" datetime="">June 26, 2011</time></span>
		<h2><a href="/browser/2011/06/26/firefox-4.0%2B-has-performance-problem-with-background-size-property/" rel="bookmark" title="Permanent Link to Firefox 4.0+ has performance problem with background-size property">Firefox 4.0+ has performance problem with background-size property</a></h2>
	</header>
    <p>Firefox starts supporting standard <code>background-size</code> property since 4.0.
But unfortunately, it likely doesn't render this property properly. If you are
using Firefox 4.0+ or Chrome, you might have noticed the angled striped background
on my site. The current <code>background-size</code> is:</p>

<div class="highlight"><pre><code class="css"><span class="nt">body</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="k">background</span><span class="o">-</span><span class="k">size</span><span class="o">:</span> <span class="m">100px</span> <span class="m">100px</span><span class="p">;</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre></div>


<p>If you change it to a smaller size with firebug or other tools on your browser,
you would see the stripes get thinner. It works perfect on Chrome but <strong>DON'T
do it on Firefox 4.0+</strong>, as if so it would cause Firefox hanging forever. I
guess the algorithm Firefox is using to render <code>background-size</code> needs to be
optimised for small size.</p>

<p>I found this problem because my ideal effect of my site is to use very thin stripes
as background. If you are brave, try this beautiful but dangerous change on my site.</p>

<div class="highlight"><pre><code class="css"><span class="nt">body</span> <span class="p">{</span>
 <span class="o">...</span>
 <span class="k">background</span><span class="o">-</span><span class="k">size</span><span class="o">:</span> <span class="m">5px</span> <span class="m">5px</span><span class="p">;</span>
 <span class="o">...</span>
<span class="p">}</span>
</code></pre></div>




	<footer>
		Posted by Jeremy Guan at 12:00 AM 
		
		| category:
			
			<a href="/categories/#browser" title="browser">browser</a>&nbsp;
			
		
		
		| tags:
			
			<a href="/tags/#firefox" title="firefox">firefox</a>&nbsp;
			
			<a href="/tags/#background-size" title="background-size">background-size</a>&nbsp;
			
		
		
		| <a href="/browser/2011/06/26/firefox-4.0%2B-has-performance-problem-with-background-size-property/#disqus_thread">View Comments</a>
		
		| <a href="/browser/2011/06/26/firefox-4.0%2B-has-performance-problem-with-background-size-property/">Permalink &#8734;</a>
	</footer>
</article>

<article>
	<header>
		<span class="date"><time pubdate="" datetime="">June 24, 2011</time></span>
		<h2><a href="/linux/2011/06/24/how-to-change-the-target-of-a-symbolic-link-in-linux/" rel="bookmark" title="Permanent Link to How to change the target of a symbolic link in Linux">How to change the target of a symbolic link in Linux</a></h2>
	</header>
    <p>The common way is to delete the original symlink then re-create it.</p>

<div class="highlight"><pre><code class="bash">rm symlink; ln -s target symlink
</code></pre></div>


<p>But if you want to do it more conveniently and efficiently, you can <em>force</em> <code>ln</code> command to change the target of the soft link without deleting the old one explicitly. For example:</p>

<div class="highlight"><pre><code class="bash"><span class="c"># original symlink</span>
<span class="nv">$ </span>ln -s /path/to/target old_symlink

<span class="c"># change to the new symlink</span>
<span class="nv">$ </span>ln -fs /path/to/target new_symlink
</code></pre></div>


<h3>References</h3>

<ul>
<li>Linux Man pages</li>
</ul>


	<footer>
		Posted by Jeremy Guan at 08:14 PM 
		
		| category:
			
			<a href="/categories/#linux" title="linux">linux</a>&nbsp;
			
		
		
		| tags:
			
			<a href="/tags/#symlink" title="symlink">symlink</a>&nbsp;
			
		
		
		| <a href="/linux/2011/06/24/how-to-change-the-target-of-a-symbolic-link-in-linux/#disqus_thread">View Comments</a>
		
		| <a href="/linux/2011/06/24/how-to-change-the-target-of-a-symbolic-link-in-linux/">Permalink &#8734;</a>
	</footer>
</article>


  	
  		<a href="/" rel="bookmark">« Previous Page</a>
  	


	<a href="/page3" style="float:right">Next Page »</a>


		</div><!-- /#content -->
	</div><!-- /#wrapper -->
	<footer id="site-footer">
		<span id="copyright">
			Copyright &copy; 2011 - 2013 Jeremy Guan. RSS feeds for <a href="/rss.xml">Entries</a>
			
				and <a href="http://jeremyguan.disqus.com/latest.rss">Comments</a>.
			
		</span>
		<span id="validation">
		</span>
	</footer><!-- /#site-footer -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/libs/jquery-1.10.2.min.js"><\/script>')</script>
	<script src="/js/plugins.js"></script>
	<script src="/js/script.js"></script>
	<script src="/js/jquery.tagcloud.js"></script>
	<script language="javascript">
		$.fn.tagcloud.defaults = {
			size: {start: 1, end: 1, unit: 'em'},
			color: {start: '#f8e0e6', end: '#ff3333'}
		};

		$(function () {
			$('#tag_cloud a').tagcloud();
		});
	</script>
	<script>
		var _gaq=[['_setAccount','UA-5719292-3'],['_trackPageview'],['_trackPageLoadTime']];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
		g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>
	<!--[if lt IE 7 ]>
		<script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script>
		<script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script>
	<![endif]-->
	
	<!-- DISPLAY DISQUS COMMENT COUNT -->
	 <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jeremyguan'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
	
  </body>
</html>